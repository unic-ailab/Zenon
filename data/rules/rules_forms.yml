version: "2.0"

rules:
  # ACTIVLim Questionnaire - Start
  - rule: Start ACTIVLim Questionnaire
    steps:
      - intent: activLim_start
      - slot_was_set:
          - questionnaire: ACTIVLIM
      - action: utter_ACTIVLIM_intro_question
      - action: activlim_form
      - active_loop: activlim_form

  - rule: Interruption in ACTIVLim Questionnaire - 1
    condition:
      - active_loop: activlim_form
    steps:
      - intent: bot_challenge
      - action: utter_iamabot
      - action: activlim_form
      - active_loop: activlim_form

  - rule: Interruption in ACTIVLim Questionnaire - 2
    condition:
      - active_loop: activlim_form
    steps:
      - intent: out_of_scope
      - action: utter_handle_out_of_scope
      - action: activlim_form
      - active_loop: activlim_form

  - rule: Interruption in ACTIVLim Questionnaire - 3
    condition:
      - active_loop: activlim_form
    steps:
      - intent: need_help
      - slot_was_set:
          - questionnaire: ACTIVLIM
      - action: utter_help
      - action: activlim_form
      - active_loop: activlim_form

  - rule: Submit - activlim_form
    condition:
      - active_loop: activlim_form
    steps:
      - action: activlim_form
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: utter_confirm_questionnaire_finished
  # ACTIVLim Questionnaire - End

  # PSQI Questionnaire - Start
  - rule: Start PSQI Questionnaire
    steps:
      - intent: psqi_start
      - slot_was_set:
          - questionnaire: PSQI
      - action: psqi_form
      - active_loop: psqi_form

  - rule: Interruption in PSQI Questionnaire - 1
    condition:
      - active_loop: psqi_form
    steps:
      - intent: bot_challenge
      - action: utter_iamabot
      - action: psqi_form
      - active_loop: psqi_form

  - rule: Interruption in PSQI Questionnaire - 2
    condition:
      - active_loop: psqi_form
    steps:
      - intent: out_of_scope
      - action: utter_handle_out_of_scope
      - action: psqi_form
      - active_loop: psqi_form

  - rule: Submit - psqi_form
    condition:
      - active_loop: psqi_form
    steps:
      - action: psqi_form
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: utter_confirm_questionnaire_finished
  # PSQI Questionnaire - End

  # Dizzines 'N Balance - Start
  - rule: Start Dizzines and Balance questionnaire
    steps:
      - intent: dizzNbalance_start
      - slot_was_set:
          - questionnaire: DizzinessAndBalance
      - action: dizznbalance_form
      - active_loop: dizznbalance_form

  - rule: Submit - dizznbalance_form
    condition:
      - active_loop: dizznbalance_form
    steps:
      - action: dizznbalance_form
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: utter_confirm_questionnaire_finished
