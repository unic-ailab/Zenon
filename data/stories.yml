version: "2.0"

stories:
    - story: Agent receives positive sentiment, user agrees to inform doctors # Works fine
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: inform
          - slot_was_set:
                - sentiment: pos
          - action: utter_inform_doctor
          - intent: affirm
          - action: utter_confirm_doctor

    - story: Agent receives positive sentiment, user doesn't agree to inform doctors. # Works fine
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: inform
          - slot_was_set:
                - sentiment: pos
          - action: utter_inform_doctor
          - intent: deny
          - action: action_utter_handle_user_deny_to_inform_doctors
          - intent: affirm
          - action: utter_no_problem

    - story: Agent receives negative sentiment, user agrees to inform doctors # Works fine
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: inform
          - slot_was_set:
                - sentiment: neg
          - action: utter_inform_doctor
          - intent: affirm
          - action: utter_confirm_doctor

    - story: Agent receives negative sentiment, user doesn't agree to inform doctors. # Works fine
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: inform
          - slot_was_set:
                - sentiment: neg
          - action: utter_inform_doctor
          - intent: deny
          - action: action_utter_handle_user_deny_to_inform_doctors
          - intent: affirm
          - action: utter_no_problem

    - story: Agent doesn't want to answer open questionnaire ACTIVLIM
      steps:
          - slot_was_set:
                - questionnaire: activlim
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_activlim_start
          - intent: deny
          - action: utter_how_to_help

    - story: Agent doesn't want to answer open questionnaire PSQI
      steps:
          - slot_was_set:
                - questionnaire: psqi
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_psqi_start
          - intent: deny
          - action: utter_how_to_help

    - story: Agent doesn't want to answer open questionnaire Dizziness and Balance
      steps:
          - slot_was_set:
                - questionnaire: dizzinessandbalance
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_dizzNbalance_start
          - intent: deny
          - action: utter_how_to_help

    - story: Agent doesn't want to answer open questionnaire Eating Habits
      steps:
          - slot_was_set:
                - questionnaire: eatinghabits
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_diet_start
          - intent: deny
          - action: utter_how_to_help

    - story: Agent doesn't want to answer open questionnaire Muscle Tone
      steps:
          - slot_was_set:
                - questionnaire: muscletone
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_muscle_start
          - intent: deny
          - action: utter_how_to_help

    - story: ACTIVLIM Questionnaire open - happy path
      steps:
          - slot_was_set:
                - questionnaire: activlim
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_activlim_start
          - intent: activLim_start
          - action: activlim_form
          - active_loop: activlim_form
          - slot_was_set:
                - requested_slot: doorbell
          - slot_was_set:
                - doorbell: impossible
          - slot_was_set:
                - requested_slot: heavyLoad
          - slot_was_set:
                - heavyLoad: impossible
          - slot_was_set:
                - requested_slot: pickFromFloor
          - slot_was_set:
                - pickFromFloor: impossible
          - slot_was_set:
                - requested_slot: walking
          - slot_was_set:
                - walking: impossible
          - slot_was_set:
                - requested_slot: null
          - active_loop: null
          - action: utter_confirm_questionnaire_finished

    - story: ACTIVLIM Questionnaire open - unhappy path
      steps:
          - slot_was_set:
                - questionnaire: activlim
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_activlim_start
          - intent: activLim_start
          - action: activlim_form
          - active_loop: activlim_form
          - slot_was_set:
                - requested_slot: doorbell
          - slot_was_set:
                - doorbell: impossible
          - slot_was_set:
                - requested_slot: heavyLoad
          - intent: cancel
          - action: utter_confirm_cancellation
          - or:
                - intent: affirm
                - intent: cancel
          - action: action_deactivate_loop
          - active_loop: null
          - slot_was_set:
                - requested_slot: null
          - action: utter_process_cancelled

    - story: ACTIVLim with Interruption - 1
      steps:
          - slot_was_set:
                - questionnaire: activlim
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_activlim_start
          - intent: activLim_start
          - action: activlim_form
          - active_loop: activlim_form
          - slot_was_set:
                - requested_slot: doorbell
          - slot_was_set:
                - doorbell: difficult
          - slot_was_set:
                - requested_slot: heavyLoad
          - intent: bot_challenge
          - action: utter_iamabot
          - action: activlim_form
          - slot_was_set:
                - requested_slot: heavyLoad
          - slot_was_set:
                - heavyLoad: easy
          - slot_was_set:
                - requested_slot: pickFromFloor
          - slot_was_set:
                - pickFromFloor: impossible
          - slot_was_set:
                - requested_slot: walking
          - slot_was_set:
                - walking: impossible
          - slot_was_set:
                - requested_slot: null
          - active_loop: null
          - action: utter_confirm_questionnaire_finished

    - story: PSQI Questionnaire open - happy path
      steps:
          - slot_was_set:
                - questionnaire: psqi
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_psqi_start
          - intent: psqi_start
          - action: psqi_form
          - active_loop: psqi_form
          - slot_was_set:
                - requested_slot: psqi_Q1
          - slot_was_set:
                - psqi_Q1: 10 p.m
          - slot_was_set:
                - requested_slot: psqi_Q2
          - slot_was_set:
                - psqi_Q2: 35
          - slot_was_set:
                - requested_slot: psqi_Q3
          - slot_was_set:
                - psqi_Q3: 6 a.m
          - slot_was_set:
                - requested_slot: psqi_Q4
          - slot_was_set:
                - psqi_Q4: 4
          - slot_was_set:
                - requested_slot: null
          - active_loop: null
          - action: utter_confirm_questionnaire_finished

    - story: PSQI Questionnaire open - unhappy path
      steps:
          - slot_was_set:
                - questionnaire: psqi
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_psqi_start
          - intent: psqi_start
          - action: psqi_form
          - active_loop: psqi_form
          - intent: cancel
          - action: utter_confirm_cancellation
          - or:
                - intent: affirm
                - intent: cancel
          - action: action_deactivate_loop
          - active_loop: null
          - action: utter_process_cancelled

    - story: Dizziness and Balance happy path
      steps:
          - slot_was_set:
                - questionnaire: dizzinessandbalance
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_dizzNbalance_start
          - intent: dizzNbalance_start
          - action: dizzNbalance_form
          - active_loop: dizzNbalance_form
          - slot_was_set:
                - requested_slot: dizzNbalance_Q1
          - slot_was_set:
                - dizzNbalance_Q1: a month ago
          - slot_was_set:
                - requested_slot: dizzNbalance_Q2
          - slot_was_set:
                - dizzNbalance_Q2: true
          - slot_was_set:
                - requested_slot: dizzNbalance_Q2i
          - slot_was_set:
                - sentiment: neg
          - slot_was_set:
                - dizzNbalance_Q2i: I fell down the stairs and hit my head
          - slot_was_set:
                - requested_slot: null
          - active_loop: null
          - action: utter_confirm_questionnaire_finished

    - story: Dizziness and Balance happy path - 1
      steps:
          - slot_was_set:
                - questionnaire: dizzinessandbalance
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_dizzNbalance_start
          - intent: dizzNbalance_start
          - action: dizzNbalance_form
          - active_loop: dizzNbalance_form
          - slot_was_set:
                - requested_slot: dizzNbalance_Q1
          - slot_was_set:
                - dizzNbalance_Q1: a month ago
          - slot_was_set:
                - requested_slot: dizzNbalance_Q2
          - slot_was_set:
                - dizzNbalance_Q2: false
          - slot_was_set:
                - requested_slot: null
          - active_loop: null
          - action: utter_confirm_questionnaire_finished

    - story: Dizziness and Balance Questionnaire open - unhappy path
      steps:
          - slot_was_set:
                - questionnaire: dizzinessandbalance
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_dizzNbalance_start
          - intent: dizzNbalance_start
          - action: dizzNbalance_form
          - active_loop: dizzNbalance_form
          - intent: cancel
          - action: utter_confirm_cancellation
          - or:
                - intent: affirm
                - intent: cancel
          - action: action_deactivate_loop
          - active_loop: null
          - action: utter_process_cancelled

    - story: Eating Habits happy path
      steps:
          - slot_was_set:
                - questionnaire: eatinghabits
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_diet_start
          - intent: diet_start
          - action: diet_form
          - active_loop: diet_form

    - story: Eating Habits Questionnaire - unhappy path
      steps:
          - slot_was_set:
                - questionnaire: eatinghabits
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_diet_start
          - intent: diet_start
          - action: diet_form
          - active_loop: diet_form
          - intent: cancel
          - action: utter_confirm_cancellation
          - or:
                - intent: affirm
                - intent: cancel
          - action: action_deactivate_loop
          - active_loop: null
          - action: utter_process_cancelled

    - story: Muscle Tone happy path
      steps:
          - slot_was_set:
                - questionnaire: muscletone
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_muscle_start
          - intent: muscletone_start
          - action: muscletone_form
          - active_loop: muscletone_form

    - story: Muscle Tone Questionnaire - unhappy path
      steps:
          - slot_was_set:
                - questionnaire: muscletone
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_muscle_start
          - intent: muscletone_start
          - action: muscletone_form
          - active_loop: muscletone_form
          - intent: cancel
          - action: utter_confirm_cancellation
          - or:
                - intent: affirm
                - intent: cancel
          - action: action_deactivate_loop
          - active_loop: null
          - action: utter_process_cancelled

    - story: Domain III relevant questions - happy path
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: domainIII_start
          - action: domainIII_form
          - active_loop: domainIII_form
          - active_loop: null
          - action: utter_inform_doctor

    - story: Domain V relevant questions - happy path
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: domainV_start
          - action: domainV_form
          - active_loop: domainV_form
          - active_loop: null
          - action: utter_inform_doctor

    - story: Domain IV relevant questions - happy path
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: domainIV_start
          - slot_was_set:
                - sentiment: pos
          - action: domainIV_form
          - active_loop: domainIV_form
          - slot_was_set:
                - requested_slot: domainIV_RQ1
          - slot_was_set:
                - sentiment: neu
          - slot_was_set:
                - domainIV_RQ1: sadness
          - slot_was_set:
                - requested_slot: domainIV_RQ2
          - slot_was_set:
                - domainIV_RQ2: rarely
          - slot_was_set:
                - requested_slot: domainIV_RQ3
          - slot_was_set:
                - domainIV_RQ3: sometimes
          - slot_was_set:
                - requested_slot: null
          - active_loop: null
          - action: utter_inform_doctor
          - intent: affirm
            entities:
                - sentiment: pos
          - slot_was_set:
                - sentiment: pos
          - action: utter_confirm_doctor

    - story: Coast happy path
      steps:
          - slot_was_set:
                - questionnaire: coast
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_coast_start
          - intent: coast_start
          - action: coast_form
          - active_loop: coast_form

    - story: Coast unhappy path
      steps:
          - slot_was_set:
                - questionnaire: coast
          - intent: greet
          - action: action_utter_greet
          - action: action_utter_ask_coast_start
          - intent: coast_start
          - action: coast_form
          - active_loop: coast_form
          - intent: cancel
          - action: utter_confirm_cancellation
          - or:
                - intent: affirm
                - intent: cancel
          - action: action_deactivate_loop
          - active_loop: null
          - action: utter_process_cancelled

    - story: MS Domain V relevant questions - happy path
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: MSdomainV_start
          - action: MSdomainV_form
          - active_loop: MSdomainV_form
          - active_loop: null
          - action: utter_inform_doctor

    - story: MS Domain IV relevant questions - happy path
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: MSdomainIV_start
          - action: MSdomainIV_form
          - active_loop: MSdomainIV_form
          - active_loop: null
          - action: utter_inform_doctor

    - story: MS Domain III relevant questions - happy path
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: MSdomainIII_start
          - action: MSdomainIII_form
          - active_loop: MSdomainIII_form
          - active_loop: null
          - action: utter_inform_doctor

    - story: MS Domain II relevant questions - happy path
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: MSdomainII_start
          - action: MSdomainII_form
          - active_loop: MSdomainII_form
          - active_loop: null
          - action: utter_inform_doctor

    - story: MS Domain I relevant questions - happy path
      steps:
          - intent: greet
          - action: action_utter_greet
          - intent: MSdomainI_start
          - action: MSdomainI_form
          - active_loop: MSdomainI_form
          - active_loop: null
          - action: utter_inform_doctor
